version: v1
debug: true
log_level: info
# read_only: false
tags:
 - "dev"
 - "internal"
 - "tokyo1"
storage:
  type: file
  dir: .dgate/test3/data/
stats?:
  enable_request_stats: true
  enable_response_stats: true
  enable_transport_stats: true
  enable_cache_stats: true
  enable_stream_stats: true
  enable_cluster_stats: true
# read_only must be true
proxy:
  port: 83
  host: 0.0.0.0
  redirect_https: 
    - /^(.+\.)?example\.(yyy|net)$/
  allowed_domains:
    - "bubba"
    - "localhost"
    - /^(.+\.)?example\.(yyy|com|net)$/
  client_transport:
    dns_server: udp://1.1.1.1:53
    dns_timeout: 10s
    max_conns_per_host: 1000
    max_idle_conns: 5000
    max_idle_conns_per_host: 1000
    idle_conn_timeout: 60s
    force_attempt_http2: false
    disable_compression: false
    tls_handshake_timeout: 10s
    expect_continue_timeout: 5s
    max_response_header_bytes: 4096
    write_buffer_size: 4096
    read_buffer_size: 4096
    max_conns_per_client: 1000
    max_body_bytes: 32768
    disable_keep_alives: false
    response_header_timeout: 10s
    dial_timeout: 10s
admin:
  port: 9083
  host: 0.0.0.0
  # read_only: true
  replication:
    id: "test3"
    bootstrap_cluster: false
    advert_address: "localhost:9083"
    cluster_address:
      - "localhost:9081"
      - "localhost:9082"
      - "localhost:9083"